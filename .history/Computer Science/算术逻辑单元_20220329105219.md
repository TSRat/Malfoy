# 算术逻辑单元
* **算术逻辑单元**（Arithmetic and Logic Unit，**ALU**）：计算机的**数学大脑**，负责**运算**的组件，基本其他所有部件都用到了它
  * 最著名的ALU是**英特尔74181**（Intel 74181），1970年发布时，它是第一个封装在单个芯片内的完整ALU
  * ALU有2个单元，1个**算术单元**和1个**逻辑单元**；算术单元负责计算机里的所有数字操作，逻辑单元执行逻辑操作
* **算术单元**
  * **半加器**（half adder）：把两个数字**相加**，使用逻辑门来实现
    * 二进制里没有2，二进制的1+1结果是0，1进到下一位，所以和为10（二进制），此时需要额外的输出代表“进位”
      | INPUT| INPUT|OUTPUT|OUTPUT|
      | ---  | ---  | ---  |  --- |
      | **A**| **B**|**进位(CARRY)**|**和(SUM)**|
      | 0    | 0    |  0   |  0   |
      |  0   |   1  |   0  |  1   |
      |  1   |   0  |  0   |  1   |
      |  1   |  1   |   1  |  0   |
  ![](../images/halfadder.png)
    * **抽象化**：把半加器封装成一个单独组件
![](../images/HALF%20ADDER.png)
  * **全加器**（Full Adder）：想处理**超过1+1的运算**就需要“全加器”，全加器有**3个输入**：A，B，C（都是1个bit），所以最大的可能是 1+1+1；全加器需要**两条输出线**：SUM和CARRY
    * **可以用半加器实现全加器**，先用半加器将A和B相加，然后把C输入到第二个半加器，最后用一个OR门检查进位是不是true 
![](../images/Full%20Adder.png)
  * **8位数字相加**：把两个数字假设为A和B，从A和B的第一位（A0和B0）开始，此时不需要处理任何进位，因为这是第一次加法，所以可以用**半加器**来加这两个数字，输出为sum0；接着加A1和B1，因为A0和B0的结果有可能进位，所以这次要用**全加器**，除了A1和B1，还需要连上进位，输出为sum1，然后把这个全加器的进位连到下一个全加器的输出，处理A2和B2；以此类推把8个bit都搞定，这叫“**8位行波进位加法器**”（8-bit ripple carry adder）
![](../images/8-bit%20ripple%20carry%20adder.png)
  * **溢出**（overflow）:注意到最后一个全加器有CARRY的输出，如果第9位有进位，代表着2个数字的和太大了，超过了8位；一般**溢出**的意思是两个数字的和太大了，**超过了用来表示的位数**，这会导致**错误和不可预期的结果**，著名的例子是**吃豆人**用8位存当前关卡数，如果玩到第256关时ALU会溢出，造成一连串错误和乱码使得该关卡无法进行，这个BUG成为牛逼吃豆人玩家的代表
    * 如果想避免溢出，我们可以加入**更多的全加器**，操作16或32位数字，让溢出更难发生，但是代价是**更多逻辑门**，另一个缺点是每次进位都要**一点时间**，在如今的量级是每秒几十亿次运算时会造成影响；所以现代计算机用的加法电路有点不同，叫“**超前进位加法器**”（carry-look-ahead adder），它更快并且做的事情一样
  * **其他算术运算**：ALU的算术单元也能做一些其他的数学运算，一般支持8个操作：**加法**（add），**带进位的加法**（add with carry），**减法**（subtract），**带借位的减法**（subtract with borrow），**使无效**（negate），**增量**（+1，increment），**减量**（-1，decrement），**数字无改变通过**（pass through）
    * 这其中**没有乘法和除法**，因为简单的ALU没有专门的电路来处理，而是将乘法用**多次加法**实现；然而笔记本电脑和手机有更好的处理器，有**专门做乘法的算术单元**；乘法电路比加法复杂，需要更多的逻辑门
* **逻辑单元**（Logic Unit）：逻辑单元执行逻辑操作，例如AND，OR，NOT操作，也能做简单的数值测试，比如一个数字是不是负数；如下为检查ALU输出是否为0的电路，它用一堆OR门检查其中一位是否为1
![](../images/zero.png)
---
* **ALU的抽象化**：高级ALU有更多标志，以下的三个是基本都有的
![](../images/ALU.png)
---
[Crash Course](https://www.bilibili.com/video/BV1EW411u7th?p=5)
   

